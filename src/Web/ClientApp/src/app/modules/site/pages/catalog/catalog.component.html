<div class="container-fluid">
  <div class="row">
    <div class="col-2">
      <!-- Spinner -->
      <div
        class="vh-100 d-flex justify-content-center align-items-center"
        *ngIf="!filtersLoaded"
      >
        <app-spinner></app-spinner>
      </div>

      <div class="py-3 text-center">
        <h2>{{ categoryName }}</h2>
      </div>

      <!-- Filters -->
      <div class="accordion" *ngIf="filtersLoaded">
        <app-filter-section
          sectionName="Types"
          [filterItems]="types"
        ></app-filter-section>

        <app-filter-section
          sectionName="Brands"
          [filterItems]="brands"
        ></app-filter-section>
      </div>
    </div>

    <div class="col-10">
      <div class="p-2">
        <span class="badge rounded-pill bg-success" *ngIf="catalog">
          {{ catalog.totalCount }} results
        </span>
      </div>

      <!-- Applyed filters -->
      <div
        class="d-flex flex-wrap justify-content-start py-3"
        *ngIf="filtersLoaded"
      >
        <app-filter-button
          class="m-1"
          *ngFor="let filter of applyedFilters"
          [description]="filter.name"
          (click)="filter.checked = !filter.checked; filter.update()"
        ></app-filter-button>
      </div>

      <!-- No items message -->
      <div
        class="vh-100 d-flex justify-content-center align-items-center"
        *ngIf="catalog && !catalog.items.length"
      >
        <h1 class="display-4">There are no items avaliable yet</h1>
      </div>

      <main *ngIf="catalog && catalog.items.length">
        <!-- Sorting -->
        <div class="d-flex justify-content-start">
          <p>sort by:</p>

          <div
            class="sort-link"
            [routerLink]=""
            [queryParams]="{ sort: 'priceup' }"
            queryParamsHandling="merge"
            *ngIf="
              sortDirection !== sortDirectionType.priceup &&
              sortDirection !== sortDirectionType.pricedown
            "
          >
            price
          </div>

          <div
            class="sort-link bg-primary text-white rounded-pill"
            [routerLink]=""
            [queryParams]="{ sort: 'pricedown' }"
            queryParamsHandling="merge"
            *ngIf="sortDirection === sortDirectionType.priceup"
          >
            price
            <img src="assets/svg/arrow-up.svg" alt="" />
          </div>

          <div
            class="sort-link bg-primary text-white rounded-pill"
            [routerLink]=""
            [queryParams]="{ sort: 'priceup' }"
            queryParamsHandling="merge"
            *ngIf="sortDirection === sortDirectionType.pricedown"
          >
            price
            <img src="assets/svg/arrow-down.svg" alt="" />
          </div>

          <div
            [ngClass]="{
              'sort-link rounded-pill': true,
              'bg-primary text-white': sortDirection === sortDirectionType.newly
            }"
            [routerLink]=""
            [queryParams]="{ sort: 'newly' }"
            queryParamsHandling="merge"
          >
            update date
          </div>
        </div>

        <!-- Navigation -->
        <app-navbar
          class="py-3"
          [currentPage]="catalog.currentPage"
          [totalPages]="catalog.totalPages"
          (pageChange)="gotoPage($event)"
        ></app-navbar>

        <!-- Items -->
        <section class="catalog m-auto">
          <app-catalog-item
            *ngFor="let item of catalog.items"
            [item]="item"
          ></app-catalog-item>
        </section>
      </main>
    </div>
  </div>
</div>
